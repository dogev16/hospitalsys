{% extends "base.html" %}

{% block title %}醫師面板{% endblock %}

{% block content %}
<h1>醫師面板喵</h1>

{% if doctor %}
  <p>醫師：{{ doctor.name }}　日期：{{ today }}</p>
{% else %}
  <p style="color:red;">沒有對應的醫師資料喵。</p>
{% endif %}

<hr>

<h2>目前叫號中喵</h2>
{% if current_ticket %}
  <p>
    號碼：{{ current_ticket.number }} 號<br>
    病人：{{ current_ticket.appointment.patient.full_name }}<br>
    時間：{{ current_ticket.appointment.time }}<br>
    狀態：{{ current_ticket.get_status_display }}
  </p>
{% else %}
  <p>目前沒有正在看診的號碼喵。</p>
{% endif %}

<hr>

<h2>等待中病人喵</h2>
{% if waiting_tickets %}
  <table border="1" cellpadding="4">
    <tr>
      <th>號碼</th>
      <th>時間</th>
      <th>病人</th>
      <th>狀態</th>
    </tr>
    {% for t in waiting_tickets %}
      <tr>
        <td>{{ t.number }}</td>
        <td>{{ t.appointment.time }}</td>
        <td>{{ t.appointment.patient.full_name }}</td>
        <td>{{ t.get_status_display }}</td>
      </tr>
    {% endfor %}
  </table>
{% else %}
  <p>目前沒有等待中的病人喵。</p>
{% endif %}

<hr>

<h2>已看診病人喵</h2>
{% if done_tickets %}
  <table border="1" cellpadding="4">
    <tr>
      <th>號碼</th>
      <th>時間</th>
      <th>病人</th>
      <th>完成時間</th>
    </tr>
    {% for t in done_tickets %}
      <tr>
        <td>{{ t.number }}</td>
        <td>{{ t.appointment.time }}</td>
        <td>{{ t.appointment.patient.full_name }}</td>
        <td>{{ t.finished_at|default:"-" }}</td>
      </tr>
    {% endfor %}
  </table>
{% else %}
  <p>今天還沒有完成看診的病人喵。</p>
{% endif %}

{% endblock %}
