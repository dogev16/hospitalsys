{% extends "base.html" %}
{% block title %}櫃台叫號面板{% endblock %}

{% block content %}
<h1>櫃台叫號面板</h1>

<p>顯示今天所有門診的叫號狀況，讓櫃台可以一眼看到目前進度。</p>

<table border="1" cellpadding="6" cellspacing="0">
  <thead>
    <tr>
      <th>日期</th>
      <th>醫師</th>
      <th>號碼</th>
      <th>病人</th>
      <th>狀態</th>
      <th>建立時間</th>
      <th>叫號時間</th>
      <th>完成時間</th>
    </tr>
  </thead>
  <tbody>
    {% if tickets %}
      {% for t in tickets %}
        <tr>
          <td>{{ t.date }}</td>
          <td>{{ t.doctor.full_name }} / {{ t.doctor.department }}</td>
          <td>{{ t.number }}</td>
          <td>{{ t.patient }}</td>
          <td>{{ t.get_status_display }}</td>
          <td>{{ t.created_at|date:"H:i" }}</td>
          <td>
            {% if t.called_at %}
              {{ t.called_at|date:"H:i" }}
            {% else %}
              -
            {% endif %}
          </td>
          <td>
            {% if t.finished_at %}
              {{ t.finished_at|date:"H:i" }}
            {% else %}
              -
            {% endif %}
          </td>
        </tr>
      {% endfor %}
    {% else %}
      <tr>
        <td colspan="8">今天還沒有任何叫號資料。</td>
      </tr>
    {% endif %}
  </tbody>
</table>

<p style="margin-top: 1rem;">
  <a href="{% url 'index' %}">回首頁</a>
</p>
{% endblock %}
