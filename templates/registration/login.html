{% extends "base.html" %}
{% block title %}ç™»å…¥{% endblock %}

{% block content %}
<h1>ç™»å…¥ </h1>

<!-- éŒ¯èª¤è¨Šæ¯ç¾åŒ–  -->
{% if form.errors %}
<div style="
    background:#ffe5e5;
    border-left:5px solid #ff4d4d;
    padding:10px 15px;
    margin-bottom:15px;
    border-radius:5px;
    color:#b30000;
">
    <strong>ç™»å…¥å¤±æ•— ï¼</strong><br>
    å¸³è™Ÿæˆ–å¯†ç¢¼å¯èƒ½è¼¸å…¥éŒ¯èª¤ ã€‚
</div>
{% endif %}

<form method="post" style="max-width: 350px;">
  {% csrf_token %}

  <!-- Username -->
  <div style="margin-bottom: 15px;">
    <label for="id_username">å¸³è™Ÿ </label><br>
    {{ form.username }}
  </div>

  <!-- Password with toggle + CapsLock -->
  <div style="margin-bottom: 15px;">
    <label for="id_password">å¯†ç¢¼ </label><br>

    <div style="position: relative;">
      {{ form.password }}

      <!-- ğŸ‘ï¸ toggle -->
      <span
        id="togglePassword"
        style="
          position:absolute;
          right:10px;
          top:50%;
          transform:translateY(-50%);
          cursor:pointer;
          user-select:none;
          color:#555;
        "
      >ğŸ‘ï¸</span>
    </div>

    <!-- CapsLock æé†’  -->
    <small id="capsWarning" style="color:red; display:none;">
      âš ï¸ ä½ é–‹è‘— CapsLock  ï¼
    </small>
  </div>

  <button type="submit">ç™»å…¥ </button>
</form>

<!-- JS for toggle + CapsLock warning -->
<script>
document.addEventListener("DOMContentLoaded", function () {

    // ===== é¡¯ç¤º / éš±è—å¯†ç¢¼  =====
    const pwd = document.getElementById("id_password");
    const toggle = document.getElementById("togglePassword");

    toggle.onclick = function () {
        if (pwd.type === "password") {
            pwd.type = "text";
            toggle.textContent = "ğŸ™ˆ";
        } else {
            pwd.type = "password";
            toggle.textContent = "ğŸ‘ï¸";
        }
    };

    // ===== CapsLock æª¢æ¸¬  =====
    const capsWarning = document.getElementById("capsWarning");

    pwd.addEventListener("keyup", function (event) {
        if (event.getModifierState("CapsLock")) {
            capsWarning.style.display = "block";
        } else {
            capsWarning.style.display = "none";
        }
    });

    pwd.addEventListener("keydown", function (event) {
        if (event.getModifierState("CapsLock")) {
            capsWarning.style.display = "block";
        } else {
            capsWarning.style.display = "none";
        }
    });
});
</script>
{% endblock %}
